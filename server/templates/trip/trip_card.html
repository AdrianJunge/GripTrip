<div id="trip-{{ trip.id }}" class="trip-card" search-terms='{{ ([trip.title] + trip.destinations) | tojson }}'>
    <div class="trip-card-header">{{ trip.title or 'Untitled trip' }}</div>
    <div class="trip-card-body">
        <p class="trip-dest">Destinations: </p>
            {% if trip.destinations | length == 0 %}
                <em>No destinations specified.</em>
            {% else %}
                {% for destination in trip.destinations %}
                    <span>{{ destination }}</span>{% if not loop.last %}, {% endif %}
                {% endfor %}
            {% endif %}
        </p>
        <p class="trip-dates">Dates: 
            {% if trip.dates | length == 0 %}
                <em>No dates specified.</em>
            {% else %}
                {% for start, end in trip.dates %}
                    <span>{{ start }} - {{ end }}</span>{% if not loop.last %}, {% endif %}
                {% endfor %}
            {% endif %}
        </p>
        <p>By {{ trip.user.username }} ( {{ trip.participants|length }}/{{ trip.max_participants }} )</p>
    </div>
    <form action="{{ url_for('trip.join', trip_id=trip.id) }}" method="post">
        <button type="submit" class="btn btn-primary trip-card-button">Join Trip</button>
    </form>
</div>
